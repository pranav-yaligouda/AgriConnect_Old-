{"version":3,"file":"marketplace-azDLA9kT.js","sources":["../../src/components/ImageWithFallback.tsx","../../src/contexts/AuthContext.tsx","../../src/utils/styleUtils.ts","../../node_modules/goober/dist/goober.modern.js","../../node_modules/react-hot-toast/dist/index.mjs","../../src/pages/Marketplace.tsx","../../src/utils/auth.ts","../../src/pages/ProductDetails.tsx"],"sourcesContent":["import React, { ImgHTMLAttributes } from 'react';\n\ninterface ImageWithFallbackProps extends ImgHTMLAttributes<HTMLImageElement> {\n  fallbackSrc?: string;\n}\n\n/**\n * A robust image component that falls back to a local asset if the original fails.\n * Usage:\n * <ImageWithFallback src={imageUrl} fallbackSrc=\"/product-placeholder.jpg\" alt=\"...\" />\n */\nconst ImageWithFallback: React.FC<ImageWithFallbackProps> = ({ fallbackSrc = '/product-placeholder.jpg', ...props }) => {\n  const handleError = (e: React.SyntheticEvent<HTMLImageElement>) => {\n    e.currentTarget.onerror = null;\n    e.currentTarget.src = fallbackSrc;\n  };\n  return <img {...props} onError={handleError} />;\n};\n\nexport default ImageWithFallback;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from '../utils/axiosConfig';\n\ninterface AuthContextType {\n  user: any;\n  token: string | null;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n  loading: boolean;\n}\n\nexport const AuthContext = createContext<AuthContextType | undefined>(undefined);\n\ninterface LoginResponse {\n  token: string;\n  user: any; // Replace 'any' with your User type if available\n}\n\nexport const AuthProvider: React.FC<{children: React.ReactNode}> = ({ children }) => {\n  const [user, setUser] = useState<any>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Load token from localStorage on app start (production best practice)\n    const storedToken = localStorage.getItem('token');\n    if (storedToken) setToken(storedToken);\n    setLoading(false);\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    setLoading(true);\n    const res = await axios.post<LoginResponse>('/auth/login', { email, password });\n    setToken(res.data.token);\n    setUser(res.data.user);\n    localStorage.setItem('token', res.data.token); // Store JWT in localStorage\n    setLoading(false);\n  };\n\n  const logout = () => {\n    setToken(null);\n    setUser(null);\n    localStorage.removeItem('token'); // Remove JWT from localStorage\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, loading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n};\n","// Shared styling constants and utility functions for consistency across the app\n\n// Container padding based on screen size\nexport const containerPadding = { py: 4 };\n\n// Card styling for consistency\nexport const cardStyle = {\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'column',\n  borderRadius: 2,\n  overflow: 'hidden',\n  transition: 'transform 0.3s, box-shadow 0.3s',\n  '&:hover': {\n    transform: 'translateY(-5px)',\n    boxShadow: 6,\n  }\n};\n\n// Paper styling for consistency\nexport const paperStyle = {\n  borderRadius: 2,\n  p: 2,\n};\n\n// Button styling variations\nexport const buttonStyles = {\n  rounded: {\n    borderRadius: 20,\n    fontWeight: 'medium',\n  },\n  primary: {\n    color: '#fff',\n    bgcolor: '#2E7D32',\n    '&:hover': {\n      bgcolor: '#1B5E20',\n    }\n  },\n};\n\n// Grid spacing\nexport const gridSpacing = 2;\n\n// Typography styles\nexport const typographyStyles = {\n  ellipsis: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    display: '-webkit-box',\n    WebkitLineClamp: 2,\n    WebkitBoxOrient: 'vertical',\n  }\n};\n\n// Form element styling\nexport const formElementStyles = {\n  textField: {\n    '& .MuiOutlinedInput-root': {\n      borderRadius: 2,\n    }\n  }\n}; ","let e={data:\"\"},t=t=>\"object\"==typeof window?((t?t.querySelector(\"#_goober\"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement(\"style\")),{innerHTML:\" \",id:\"_goober\"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,j as styled};\n","\"use client\";\nvar W=e=>typeof e==\"function\",f=(e,t)=>W(e)?e(t):e;var F=(()=>{let e=0;return()=>(++e).toString()})(),A=(()=>{let e;return()=>{if(e===void 0&&typeof window<\"u\"){let t=matchMedia(\"(prefers-reduced-motion: reduce)\");e=!t||t.matches}return e}})();import{useEffect as H,useState as j,useRef as Q}from\"react\";var Y=20;var U=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Y)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return U(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},P=[],y={toasts:[],pausedAt:void 0},u=e=>{y=U(y,e),P.forEach(t=>{t(y)})},q={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D=(e={})=>{let[t,r]=j(y),s=Q(y);H(()=>(s.current!==y&&r(y),P.push(r),()=>{let o=P.indexOf(r);o>-1&&P.splice(o,1)}),[]);let a=t.toasts.map(o=>{var n,i,p;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((n=e[o.type])==null?void 0:n.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((i=e[o.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||q[o.type],style:{...e.style,...(p=e[o.type])==null?void 0:p.style,...o.style}}});return{...t,toasts:a}};var J=(e,t=\"blank\",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:\"status\",\"aria-live\":\"polite\"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||F()}),x=e=>(t,r)=>{let s=J(t,e,r);return u({type:2,toast:s}),s.id},c=(e,t)=>x(\"blank\")(e,t);c.error=x(\"error\");c.success=x(\"success\");c.loading=x(\"loading\");c.custom=x(\"custom\");c.dismiss=e=>{u({type:3,toastId:e})};c.remove=e=>u({type:4,toastId:e});c.promise=(e,t,r)=>{let s=c.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e==\"function\"&&(e=e()),e.then(a=>{let o=t.success?f(t.success,a):void 0;return o?c.success(o,{id:s,...r,...r==null?void 0:r.success}):c.dismiss(s),a}).catch(a=>{let o=t.error?f(t.error,a):void 0;o?c.error(o,{id:s,...r,...r==null?void 0:r.error}):c.dismiss(s)}),e};import{useEffect as $,useCallback as L}from\"react\";var K=(e,t)=>{u({type:1,toast:{id:e,height:t}})},X=()=>{u({type:5,time:Date.now()})},b=new Map,Z=1e3,ee=(e,t=Z)=>{if(b.has(e))return;let r=setTimeout(()=>{b.delete(e),u({type:4,toastId:e})},t);b.set(e,r)},O=e=>{let{toasts:t,pausedAt:r}=D(e);$(()=>{if(r)return;let o=Date.now(),n=t.map(i=>{if(i.duration===1/0)return;let p=(i.duration||0)+i.pauseDuration-(o-i.createdAt);if(p<0){i.visible&&c.dismiss(i.id);return}return setTimeout(()=>c.dismiss(i.id),p)});return()=>{n.forEach(i=>i&&clearTimeout(i))}},[t,r]);let s=L(()=>{r&&u({type:6,time:Date.now()})},[r]),a=L((o,n)=>{let{reverseOrder:i=!1,gutter:p=8,defaultPosition:d}=n||{},h=t.filter(m=>(m.position||d)===(o.position||d)&&m.height),v=h.findIndex(m=>m.id===o.id),S=h.filter((m,E)=>E<v&&m.visible).length;return h.filter(m=>m.visible).slice(...i?[S+1]:[0,S]).reduce((m,E)=>m+(E.height||0)+p,0)},[t]);return $(()=>{t.forEach(o=>{if(o.dismissed)ee(o.id,o.removeDelay);else{let n=b.get(o.id);n&&(clearTimeout(n),b.delete(o.id))}})},[t]),{toasts:t,handlers:{updateHeight:K,startPause:X,endPause:s,calculateOffset:a}}};import*as l from\"react\";import{styled as B,keyframes as z}from\"goober\";import*as g from\"react\";import{styled as w,keyframes as me}from\"goober\";import{styled as te,keyframes as I}from\"goober\";var oe=I`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`,re=I`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,se=I`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`,k=te(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#ff4b4b\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${re} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${e=>e.secondary||\"#fff\"};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${se} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;import{styled as ae,keyframes as ie}from\"goober\";var ne=ie`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`,V=ae(\"div\")`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${e=>e.secondary||\"#e0e0e0\"};\n  border-right-color: ${e=>e.primary||\"#616161\"};\n  animation: ${ne} 1s linear infinite;\n`;import{styled as ce,keyframes as N}from\"goober\";var pe=N`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`,de=N`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`,_=ce(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#61d345\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${de} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${e=>e.secondary||\"#fff\"};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;var ue=w(\"div\")`\n  position: absolute;\n`,le=w(\"div\")`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`,fe=me`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,Te=w(\"div\")`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${fe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`,M=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t==\"string\"?g.createElement(Te,null,t):t:r===\"blank\"?null:g.createElement(le,null,g.createElement(V,{...s}),r!==\"loading\"&&g.createElement(ue,null,r===\"error\"?g.createElement(k,{...s}):g.createElement(_,{...s})))};var ye=e=>`\n0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ge=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}\n`,he=\"0%{opacity:0;} 100%{opacity:1;}\",xe=\"0%{opacity:1;} 100%{opacity:0;}\",be=B(\"div\")`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`,Se=B(\"div\")`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`,Ae=(e,t)=>{let s=e.includes(\"top\")?1:-1,[a,o]=A()?[he,xe]:[ye(s),ge(s)];return{animation:t?`${z(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${z(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},C=l.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?Ae(e.position||t||\"top-center\",e.visible):{opacity:0},o=l.createElement(M,{toast:e}),n=l.createElement(Se,{...e.ariaProps},f(e.message,e));return l.createElement(be,{className:e.className,style:{...a,...r,...e.style}},typeof s==\"function\"?s({icon:o,message:n}):l.createElement(l.Fragment,null,o,n))});import{css as Pe,setup as Re}from\"goober\";import*as T from\"react\";Re(T.createElement);var ve=({id:e,className:t,style:r,onHeightUpdate:s,children:a})=>{let o=T.useCallback(n=>{if(n){let i=()=>{let p=n.getBoundingClientRect().height;s(e,p)};i(),new MutationObserver(i).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return T.createElement(\"div\",{ref:o,className:t,style:r},a)},Ee=(e,t)=>{let r=e.includes(\"top\"),s=r?{top:0}:{bottom:0},a=e.includes(\"center\")?{justifyContent:\"center\"}:e.includes(\"right\")?{justifyContent:\"flex-end\"}:{};return{left:0,right:0,display:\"flex\",position:\"absolute\",transition:A()?void 0:\"all 230ms cubic-bezier(.21,1.02,.73,1)\",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}},De=Pe`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`,R=16,Oe=({reverseOrder:e,position:t=\"top-center\",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:n})=>{let{toasts:i,handlers:p}=O(r);return T.createElement(\"div\",{id:\"_rht_toaster\",style:{position:\"fixed\",zIndex:9999,top:R,left:R,right:R,bottom:R,pointerEvents:\"none\",...o},className:n,onMouseEnter:p.startPause,onMouseLeave:p.endPause},i.map(d=>{let h=d.position||t,v=p.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),S=Ee(h,v);return T.createElement(ve,{id:d.id,key:d.id,onHeightUpdate:p.updateHeight,className:d.visible?De:\"\",style:S},d.type===\"custom\"?f(d.message,d):a?a(d):T.createElement(C,{toast:d,position:h}))}))};var Vt=c;export{_ as CheckmarkIcon,k as ErrorIcon,V as LoaderIcon,C as ToastBar,M as ToastIcon,Oe as Toaster,Vt as default,f as resolveValue,c as toast,O as useToaster,D as useToasterStore};\n//# sourceMappingURL=index.mjs.map","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Box,\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n  CardActions,\n  Typography,\n  Button,\n  Chip,\n  Rating,\n  TextField,\n  InputAdornment,\n  Drawer,\n  List,\n  ListItem,\n  ListItemText,\n  Divider,\n  FormGroup,\n  FormControlLabel,\n  Checkbox,\n  Slider,\n  IconButton,\n  Select,\n  MenuItem,\n  Paper,\n  Pagination,\n  FormControl,\n  InputLabel,\n  useMediaQuery,\n  useTheme,\n  Stack,\n  Avatar,\n  Tooltip,\n  CircularProgress,\n  Alert,\n} from \"@mui/material\";\nimport ImageWithFallback from '../components/ImageWithFallback';\nimport {\n  Search,\n  FilterList,\n  LocationOn,\n  Close,\n  GrassOutlined,\n  Store,\n  StarRate,\n  Sort,\n  CalendarToday,\n  Category,\n} from \"@mui/icons-material\";\nimport {\n  containerPadding,\n  cardStyle,\n  paperStyle,\n  formElementStyles,\n  gridSpacing,\n  typographyStyles,\n} from \"../utils/styleUtils\";\nimport { fetchProducts, fetchCategories } from \"../services/apiService\";\n// Removed incorrect import. Use apiService and axiosConfig for all API calls.\nimport { toast } from \"react-hot-toast\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useTranslation } from \"react-i18next\";\n\ninterface Product {\n  _id: string;\n  name: string;\n  description: string;\n  price: number;\n  unit: string;\n  images: string[];\n  isOrganic: boolean;\n  availableQuantity: number;\n  harvestDate: string;\n  farmer: {\n    name: string;\n    address: {\n      district: string;\n      state: string;\n    };\n  };\n  location: {\n    district: string;\n    state: string;\n  };\n}\n\nconst Marketplace = () => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const isTablet = useMediaQuery(theme.breakpoints.down(\"md\"));\n  const navigate = useNavigate();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [products, setProducts] = useState<Product[]>([]);\n  const [debouncedSearchQuery, setDebouncedSearchQuery] = useState(searchQuery);\n  const [categories, setCategories] = useState<string[]>([]);\n  const { t } = useTranslation('marketplace');\n\n  const [isFilterDrawerOpen, setIsFilterDrawerOpen] = useState(false);\n  const [selectedDistrict, setSelectedDistrict] = useState(\"\");\n\n  const [sortBy, setSortBy] = useState(\"featured\");\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const [organicOnly, setOrganicOnly] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageCount, setPageCount] = useState(1);\n  const [totalProducts, setTotalProducts] = useState(0);\n  const productsPerPage = isTablet ? 6 : 12;\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Updated useEffect for fetching products\n  useEffect(() => {\n    const handleFetchProducts = async () => {\n      try {\n        setLoading(true);\n        setError(null); // Ensure error is reset before fetching\n        const params = {\n          search: debouncedSearchQuery,\n          category: selectedCategories.includes(\"all\")\n            ? undefined\n            : selectedCategories.join(\",\"),\n          district: selectedDistrict,\n          ...(organicOnly && { isOrganic: true }),\n          sort: sortBy,\n          page: currentPage,\n          limit: productsPerPage\n        };\n        const { products, total, pageCount: backendPageCount } = await fetchProducts(params);\n        setProducts(Array.isArray(products) ? products : []);\n        setTotalProducts(total);\n        setPageCount(backendPageCount);\n      } catch (err) {\n        let message = t ? t('fetchError') : 'Failed to fetch products';\n        console.error('fetchProducts error:', err);\n        setError(message);\n        setProducts([]); // Ensure products is always an array\n        toast.error(message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    handleFetchProducts();\n  }, [\n    debouncedSearchQuery,\n    selectedCategories,\n    organicOnly,\n    sortBy,\n    selectedDistrict,\n    currentPage,\n    productsPerPage\n  ]);\n\n  useEffect(() => {\n    fetchCategories()\n      .then((res: string[]) => {\n        if (Array.isArray(res)) {\n          setCategories([\"all\", ...res.filter((c) => c !== \"all\")]);\n        }\n      })\n      .catch((err: unknown) => {\n        console.error(\"Failed to load categories:\", err);\n        toast.error(\"Failed to load categories\");\n        setCategories([\"all\"]);\n      });\n  }, []);\n\n  // Add this useEffect for debouncing\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedSearchQuery(searchQuery);\n    }, 500); // 500ms delay\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchQuery]);\n\n  const uniqueDistricts = Array.from(\n    new Set(\n      (products || [])\n        .map((product) => product.location?.district)\n        .filter((district) => district !== undefined)\n    )\n  ).sort();\n\n  const handleCategoryChange = (category: string) => {\n    setSelectedCategories((prev) => {\n      if (category === \"all\") {\n        return [\"all\"];\n      }\n      if (prev.includes(category)) {\n        return prev.filter((cat) => cat !== category);\n      }\n      const newCategories = [...prev.filter((cat) => cat !== \"all\"), category];\n      return newCategories;\n    });\n  };\n\n  const toggleFilterDrawer = (open: boolean) => {\n    setIsFilterDrawerOpen(open);\n  };\n\n  const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(event.target.value);\n  };\n\n  const handleSortChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setSortBy(event.target.value as string);\n  };\n\n  const handlePageChange = (\n    event: React.ChangeEvent<unknown>,\n    value: number\n  ) => {\n    setCurrentPage(value);\n    // Scroll to top when changing pages\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  };\n\n  // Function to capitalize first letter\n  const capitalize = (str: string) =>\n    str.charAt(0).toUpperCase() + str.slice(1);\n\n  if (loading) {\n    return (\n      <Container\n        maxWidth=\"lg\"\n        sx={{\n          py: 4,\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          minHeight: \"60vh\",\n        }}\n      >\n        <CircularProgress size={60} />\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4, textAlign: \"center\" }}>\n        <Typography variant=\"h5\" color=\"error\">\n          {error}\n        </Typography>\n      </Container>\n    );\n  }\n\n  const desktopFilterSection = (\n    <Box sx={{ display: { xs: \"none\", md: \"block\" }, width: \"100%\", mb: 2 }}>\n      <Paper\n        sx={{\n          ...paperStyle,\n          mb: 2,\n          p: 2,\n          borderRadius: 4,\n          boxShadow: \"0 8px 16px rgba(0,0,0,0.08)\",\n        }}\n      >\n        <Grid container spacing={2} alignItems=\"center\">\n          {/* Search Field */}\n          <Grid item xs={12} md={4}>\n            <TextField\n              fullWidth\n              placeholder={t('searchPlaceholder')}\n              variant=\"outlined\"\n              size=\"medium\"\n              value={searchQuery}\n              onChange={handleSearchChange}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <Search color=\"primary\" />\n                  </InputAdornment>\n                ),\n                sx: {\n                  borderRadius: 3,\n                  bgcolor: \"background.paper\",\n                  \"&:hover\": { bgcolor: \"grey.50\" },\n                },\n              }}\n            />\n          </Grid>\n\n          {/* Sort Select */}\n          <Grid item xs={12} md={2}>\n            <FormControl fullWidth size=\"medium\">\n              <InputLabel>\n                <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n                  <Sort fontSize=\"small\" /> {t('sortBy')}\n                </Stack>\n              </InputLabel>\n              <Select\n                value={sortBy}\n                label={t('sortBy')}\n                onChange={handleSortChange as any}\n                sx={{\n                  borderRadius: 3,\n                  bgcolor: \"background.paper\",\n                  \"&:hover\": { bgcolor: \"grey.50\" },\n                }}\n              >\n                <MenuItem value=\"featured\">{t('featured')}</MenuItem>\n                <MenuItem value=\"price-asc\">{t('priceLowToHigh')}</MenuItem>\n                <MenuItem value=\"price-desc\">{t('priceHighToLow')}</MenuItem>\n                <MenuItem value=\"newest\">{t('newest')}</MenuItem>\n              </Select>\n            </FormControl>\n          </Grid>\n\n          {/* Categories Filter */}\n          <Grid item xs={12} md={3}>\n            <FormControl fullWidth size=\"medium\">\n              <InputLabel>\n                <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n                  <Category fontSize=\"small\" /> {t('category')}\n                </Stack>\n              </InputLabel>\n              <Select\n                multiple\n                value={selectedCategories}\n                onChange={(e) =>\n                  setSelectedCategories(e.target.value as string[])\n                }\n                label={t('category')}\n                renderValue={(selected) => (\n                  <Box sx={{ display: \"flex\", flexWrap: \"wrap\", gap: 0.5 }}>\n                    {(selected as string[]).map((value) => (\n                      <Chip\n                        key={value}\n                        label={capitalize(value)}\n                        size=\"small\"\n                        sx={{ borderRadius: 2 }}\n                      />\n                    ))}\n                  </Box>\n                )}\n                sx={{\n                  borderRadius: 3,\n                  bgcolor: \"background.paper\",\n                  \"&:hover\": { bgcolor: \"grey.50\" },\n                }}\n              >\n                {(categories || []).map((category) => (\n                  <MenuItem key={category} value={category}>\n                    <Checkbox checked={selectedCategories.includes(category)} />\n                    <ListItemText primary={capitalize(category)} />\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Grid>\n\n          {/* Location Filter */}\n          <Grid item xs={12} md={2}>\n            <FormControl fullWidth size=\"medium\">\n              <InputLabel>\n                <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n                  <LocationOn fontSize=\"small\" /> {t('district')}\n                </Stack>\n              </InputLabel>\n              <Select\n                value={selectedDistrict}\n                label={t('district')}\n                onChange={(e) => setSelectedDistrict(e.target.value as string)}\n                sx={{\n                  borderRadius: 3,\n                  bgcolor: \"background.paper\",\n                  \"&:hover\": { bgcolor: \"grey.50\" },\n                }}\n              >\n                <MenuItem value=\"\">\n                  <em>{t('allDistricts')}</em>\n                </MenuItem>\n                {(uniqueDistricts || []).map((district) => (\n                  <MenuItem key={district} value={district}>\n                    {capitalize(district)}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </Grid>\n\n          {/* Organic Filter */}\n          <Grid item xs={12} md={1}>\n            <Tooltip title={t('showOnlyOrganic')}>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={organicOnly}\n                    onChange={(e) => setOrganicOnly(e.target.checked)}\n                    color=\"primary\"\n                    icon={<GrassOutlined />}\n                    checkedIcon={<GrassOutlined />}\n                  />\n                }\n                label=\"\"\n                sx={{\n                  m: 0,\n                  \"& .MuiButtonBase-root\": { p: 1 },\n                  \"&:hover\": {\n                    bgcolor: \"grey.50\",\n                    borderRadius: 2,\n                  },\n                }}\n              />\n            </Tooltip>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Box>\n  );\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ ...containerPadding }}>\n      {/* Hero Section */}\n      <Box sx={{ mb: 3, textAlign: \"center\" }}>\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom fontWeight=\"bold\">\n          {t('hero.title')}\n        </Typography>\n        <Typography\n          variant=\"h6\"\n          color=\"text.secondary\"\n          sx={{ maxWidth: 800, mx: \"auto\" }}\n        >\n          {t('hero.tagline')}\n        </Typography>\n        <Stack direction=\"row\" justifyContent=\"center\" spacing={2} sx={{ mt: 2, mb: 1 }}>\n          <Chip label={t('hero.chip1')} color=\"primary\" variant=\"outlined\" />\n          <Chip label={t('hero.chip2')} color=\"primary\" variant=\"outlined\" />\n          <Chip label={t('hero.chip3')} color=\"primary\" variant=\"outlined\" />\n          \n        </Stack>\n      </Box>\n      {/* Mobile Filter Button */}\n      {isMobile && (\n        <Box sx={{ mb: 2, px: 2 }}>\n          <Button\n            variant=\"outlined\"\n            fullWidth\n            startIcon={<FilterList />}\n            onClick={() => toggleFilterDrawer(true)}\n            sx={{\n              py: 1.5,\n              borderRadius: 2,\n              fontSize: \"1rem\",\n            }}\n          >\n            {t('filterProducts')}\n          </Button>\n        </Box>\n      )}\n\n      {desktopFilterSection}\n\n      <Grid container spacing={gridSpacing}>\n        {/* Product Grid */}\n        <Grid item xs={12}>\n          <Box sx={{ mb: 2 }}>\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                mb: 1,\n              }}\n            >\n              <Typography\n                variant=\"body1\"\n                color=\"text.secondary\"\n                fontWeight=\"medium\"\n              >\n                {totalProducts} {t('productsAvailable')}\n              </Typography>\n            </Box>\n\n            {/* Selected filters display */}\n            {((selectedCategories || []).length > 0 || organicOnly || searchQuery) && (\n              <Stack\n                direction=\"row\"\n                spacing={1}\n                sx={{ mt: 1, flexWrap: \"wrap\", gap: 1 }}\n              >\n                {(selectedCategories || []).map((category) => (\n                  <Chip\n                    key={category}\n                    label={capitalize(category)}\n                    onDelete={() => handleCategoryChange(category)}\n                    size=\"medium\"\n                    color=\"primary\"\n                    variant=\"outlined\"\n                    sx={{ borderRadius: 2 }}\n                  />\n                ))}\n                {organicOnly && (\n                  <Chip\n                    label={t('organic')}\n                    onDelete={() => setOrganicOnly(false)}\n                    size=\"medium\"\n                    color=\"secondary\"\n                    icon={<GrassOutlined />}\n                    sx={{ borderRadius: 2 }}\n                  />\n                )}\n                {searchQuery && (\n                  <Chip\n                    label={`\"${searchQuery}\"`}\n                    onDelete={() => setSearchQuery(\"\")}\n                    size=\"medium\"\n                    color=\"default\"\n                    sx={{ borderRadius: 2 }}\n                  />\n                )}\n                {selectedDistrict && (\n                  <Chip\n                    label={`District: ${capitalize(selectedDistrict)}`}\n                    onDelete={() => setSelectedDistrict(\"\")}\n                    size=\"medium\"\n                    color=\"default\"\n                    sx={{ borderRadius: 2 }}\n                  />\n                )}\n              </Stack>\n            )}\n          </Box>\n\n          {(products && products.length > 0) ? (\n            <Grid container spacing={2}>\n              {(products || []).map((product) => (\n                <Grid\n                  item\n                  xs={12}\n                  sm={6}\n                  md={4}\n                  lg={3}\n                  xl={3}\n                  key={product._id}\n                >\n                  <Card\n                    sx={{\n                      ...cardStyle,\n                      height: \"100%\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      minHeight: \"500px\",\n                      position: \"relative\",\n                    }}\n                  >\n                    {/* Badges */}\n                    <Box\n                      sx={{\n                        position: \"absolute\",\n                        left: 16,\n                        top: 16,\n                        zIndex: 1,\n                        display: \"flex\",\n                        gap: 1,\n                      }}\n                    >\n                      {product.isOrganic && (\n                        <Chip\n                          label={t('organic')}\n                          size=\"small\"\n                          color=\"secondary\"\n                          icon={<GrassOutlined />}\n                          sx={{\n                            fontWeight: \"bold\",\n                            borderRadius: \"16px\",\n                          }}\n                        />\n                      )}\n\n                      {new Date(product.harvestDate) >\n                        new Date(Date.now() - 3 * 24 * 60 * 60 * 1000) && (\n                        <Chip\n                          label={t('fresh')}\n                          size=\"small\"\n                          color=\"success\"\n                          sx={{\n                            fontWeight: \"bold\",\n                            borderRadius: \"16px\",\n                          }}\n                        />\n                      )}\n                    </Box>\n\n                    {/* Product Image */}\n                    <Box\n                      sx={{\n                        position: \"relative\",\n                        height: \"200px\",\n                        width: \"100%\",\n                      }}\n                    >\n                      <ImageWithFallback\n                        src={product.images[0] || '/product-placeholder.jpg'}\n                        fallbackSrc=\"/product-placeholder.jpg\"\n                        alt={product.name}\n                        style={{ objectFit: 'cover', height: '100%', width: '100%', borderRadius: 2 }}\n                      />\n                      <Box\n                        sx={{\n                          position: \"absolute\",\n                          bottom: 0,\n                          left: 0,\n                          right: 0,\n                          height: \"60px\",\n                          background:\n                            \"linear-gradient(to top, rgba(0,0,0,0.7), transparent)\",\n                        }}\n                      />\n                      <Box sx={{ position: \"absolute\", bottom: 10, right: 10 }}>\n                        <Chip\n                          label={`â‚¹${product.price}/${product.unit}`}\n                          sx={{\n                            bgcolor: \"primary.main\",\n                            color: \"white\",\n                            fontWeight: \"bold\",\n                            fontSize: \"0.9rem\",\n                            borderRadius: \"16px\",\n                          }}\n                        />\n                      </Box>\n                    </Box>\n\n                    <CardContent sx={{ flexGrow: 1, pt: 2, pb: 1, px: 2 }}>\n                      {/* Product title */}\n                      <Box\n                        sx={{\n                          display: \"flex\",\n                          justifyContent: \"space-between\",\n                          alignItems: \"flex-start\",\n                          mb: 2,\n                        }}\n                      >\n                        <Typography\n                          variant=\"h6\"\n                          component=\"h3\"\n                          sx={{\n                            fontWeight: \"bold\",\n                            fontSize: \"1.1rem\",\n                            lineHeight: 1.2,\n                            ...typographyStyles.ellipsis,\n                            height: \"24px\",\n                          }}\n                        >\n                          {product.name}\n                        </Typography>\n                      </Box>\n\n                      {/* Short description */}\n                      <Typography\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        sx={{\n                          mb: 1,\n                          ...typographyStyles.ellipsis,\n                          height: \"40px\",\n                        }}\n                      >\n                        {product.description}\n                      </Typography>\n\n                      {/* Farmer info */}\n                      <Box\n                        sx={{ display: \"flex\", alignItems: \"center\", mb: 1 }}\n                      >\n                        <Store\n                          fontSize=\"small\"\n                          color=\"primary\"\n                          sx={{ mr: 0.5 }}\n                        />\n                        <Typography\n                          variant=\"body2\"\n                          sx={{ fontWeight: \"medium\" }}\n                        >\n                          {product.farmer?.name || t('unknownFarmer')}\n                        </Typography>\n                      </Box>\n\n                      <Box\n                        sx={{ display: \"flex\", alignItems: \"center\", mb: 1 }}\n                      >\n                        <LocationOn\n                          fontSize=\"small\"\n                          color=\"action\"\n                          sx={{ mr: 0.5 }}\n                        />\n                        <Typography\n                          variant=\"body2\"\n                          color=\"text.secondary\"\n                          noWrap\n                        >\n                          {product.location\n                            ? `${product.location.district}, ${product.location.state}`\n                            : t('locationNotSpecified')}\n                        </Typography>\n                      </Box>\n\n                      {/* Stock */}\n                      <Box sx={{ mb: 0.5 }}>\n                        <Typography\n                          variant=\"body2\"\n                          color={\n                            product.availableQuantity > 20\n                              ? \"success.main\"\n                              : product.availableQuantity > 5\n                              ? \"warning.main\"\n                              : \"error.main\"\n                          }\n                        >\n                          {product.availableQuantity > 20\n                            ? t('inStock')\n                            : product.availableQuantity > 5\n                            ? t('limitedStock')\n                            : t('almostSoldOut')}\n                        </Typography>\n                      </Box>\n                    </CardContent>\n\n                    <CardActions\n                      sx={{\n                        px: 2,\n                        pb: 2,\n                        pt: 0,\n                        justifyContent: \"space-between\",\n                        gap: 1,\n                      }}\n                    >\n                      <Button\n                        component={Link}\n                        to={`/products/${product._id}`}\n                        variant=\"contained\"\n                        size=\"small\"\n                        sx={{\n                          borderRadius: \"20px\",\n                          fontWeight: \"medium\",\n                          width: \"100%\",\n                        }}\n                      >\n                        {t('viewProductDetails')}\n                      </Button>\n                    </CardActions>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          ) : (\n            <Paper sx={{ p: 6, textAlign: \"center\", borderRadius: 2 }}>\n              <Typography variant=\"h5\" gutterBottom>\n                {t('noProductsFound')}\n              </Typography>\n              <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n                {t('tryAdjustingSearch')}\n              </Typography>\n              <Button\n                variant=\"contained\"\n                sx={{ mt: 2, borderRadius: 2, py: 1, px: 3 }}\n                onClick={() => {\n                  setSelectedCategories([]);\n                  setOrganicOnly(false);\n                  setSearchQuery(\"\");\n                  setSelectedDistrict(\"\");\n                }}\n              >\n                {t('viewAllProducts')}\n              </Button>\n            </Paper>\n          )}\n\n          {/* Pagination */}\n          {pageCount > 1 && (\n            <Box\n              sx={{ display: \"flex\", justifyContent: \"center\", mt: 3, mb: 1 }}\n            >\n              <Pagination\n                count={pageCount}\n                page={currentPage}\n                onChange={(event, value) => setCurrentPage(value)}\n                color=\"primary\"\n                siblingCount={isMobile ? 0 : 1}\n                boundaryCount={0}\n                shape=\"rounded\"\n                size={isMobile ? \"medium\" : \"large\"}\n              />\n            </Box>\n          )}\n        </Grid>\n      </Grid>\n\n      {/* Mobile Filter Drawer */}\n      <Drawer\n        anchor=\"left\"\n        open={isFilterDrawerOpen}\n        onClose={() => toggleFilterDrawer(false)}\n        sx={{\n          \"& .MuiDrawer-paper\": {\n            width: \"85vw\",\n            maxWidth: 320,\n            boxSizing: \"border-box\",\n            \"& .MuiFormControlLabel-root\": {\n              alignItems: \"flex-start\",\n            },\n          },\n        }}\n      >\n        <Box sx={{ p: 2, height: \"100%\", overflowY: \"auto\" }}>\n          <Box\n            sx={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              mb: 2,\n            }}\n          >\n            <Typography variant=\"h6\" fontWeight=\"bold\">\n              {t('filters')}\n            </Typography>\n            <IconButton onClick={() => toggleFilterDrawer(false)}>\n              <Close />\n            </IconButton>\n          </Box>\n          <Divider sx={{ mb: 2 }} />\n\n          <Box sx={{ \"& .MuiInputBase-root\": { fontSize: \"0.9rem\" } }}>\n            {/* Categories Section */}\n            <Typography variant=\"subtitle2\" fontWeight=\"bold\" gutterBottom>\n              {t('categories')}\n            </Typography>\n            <FormGroup sx={{ mb: 3 }}>\n              {categories.map((category) => (\n                <FormControlLabel\n                  key={category}\n                  control={\n                    <Checkbox\n                      checked={selectedCategories.includes(category)}\n                      onChange={() => handleCategoryChange(category)}\n                      size=\"small\"\n                      sx={{ py: 0.5 }}\n                    />\n                  }\n                  label={\n                    <Typography variant=\"body2\" sx={{ fontSize: \"0.9rem\" }}>\n                      {capitalize(category)}\n                    </Typography>\n                  }\n                  sx={{\n                    mx: 0,\n                    py: 0.5,\n                    \"&:hover\": { backgroundColor: \"action.hover\" },\n                  }}\n                />\n              ))}\n            </FormGroup>\n\n            <Divider sx={{ my: 2 }} />\n\n            {/* Location Section */}\n            <Typography variant=\"subtitle2\" fontWeight=\"bold\" gutterBottom>\n              {t('location')}\n            </Typography>\n            <FormControl fullWidth size=\"small\" sx={{ mb: 3 }}>\n              <InputLabel sx={{ fontSize: \"0.9rem\" }}>\n                {t('selectDistrict')}\n              </InputLabel>\n              <Select\n                value={selectedDistrict}\n                onChange={(e) => setSelectedDistrict(e.target.value as string)}\n                sx={{ fontSize: \"0.9rem\" }}\n              >\n                <MenuItem value=\"\">\n                  <em>{t('allDistricts')}</em>\n                </MenuItem>\n                {uniqueDistricts.map((district) => (\n                  <MenuItem key={district} value={district}>\n                    {capitalize(district)}\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            <Divider sx={{ my: 2 }} />\n\n            {/* Organic Filter */}\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={organicOnly}\n                  onChange={(e) => setOrganicOnly(e.target.checked)}\n                  size=\"small\"\n                />\n              }\n              label={\n                <Typography variant=\"body2\" sx={{ fontSize: \"0.9rem\" }}>\n                  {t('showOnlyOrganic')}\n                </Typography>\n              }\n              sx={{ mx: 0 }}\n            />\n\n            <Divider sx={{ my: 3 }} />\n\n            {/* Reset Button */}\n            <Button\n              fullWidth\n              variant=\"outlined\"\n              size=\"medium\"\n              sx={{\n                borderRadius: 2,\n                textTransform: \"none\",\n                fontSize: \"0.9rem\",\n                py: 1,\n              }}\n              onClick={() => {\n                setSelectedCategories([]);\n                setOrganicOnly(false);\n                setSearchQuery(\"\");\n                setSelectedDistrict(\"\");\n              }}\n            >\n              {t('clearAllFilters')}\n            </Button>\n          </Box>\n        </Box>\n      </Drawer>\n    </Container>\n  );\n};\n\nexport default Marketplace;\n","// Utility to get the current logged-in user ID from localStorage JWT\n// (Assumes JWT payload contains userId or _id)\n\nexport function getCurrentUserId(): string | undefined {\n  const token = localStorage.getItem('token');\n  if (!token) return undefined;\n  try {\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    return payload.userId || payload._id;\n  } catch {\n    return undefined;\n  }\n}\n","import { ArrowBack } from \"@mui/icons-material\";\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from '../contexts/AuthContext';\nimport { getCurrentUserId } from '../utils/auth';\nimport { checkExistingContactRequest, createContactRequest, fetchMyContactRequests, confirmContactRequestAsUser, confirmContactRequestAsFarmer } from '../services/apiService';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport {\n  Container,\n  Grid,\n  Typography,\n  Card,\n  CardContent,\n  Button,\n  Box,\n  Chip,\n  Divider,\n  TextField,\n  IconButton,\n  Avatar,\n  Rating,\n  Paper,\n  Tabs,\n  Tab,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  useTheme,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  CircularProgress,\n  useMediaQuery,\n} from \"@mui/material\";\nimport {\n  ShoppingCart,\n  Add,\n  Remove,\n  Store,\n  AccessTime,\n  CalendarToday,\n  CheckCircle,\n  LocationOn,\n  Logout,\n  Inventory,\n} from \"@mui/icons-material\";\nimport { toast } from \"react-toastify\";\nimport api from \"../utils/axiosConfig\";\nimport { useTranslation } from \"react-i18next\";\nimport { t } from \"i18next\";\n\n// Utility for role-based profile placeholder\nfunction getRoleProfilePlaceholder(role?: string): string {\n  switch (role) {\n    case 'farmer':\n      return '/images/farmerProfilePlaceholder.png';\n    case 'vendor':\n      return '/images/vendorProfilePlaceholder.png';\n    default:\n      return '/images/userProfilePlaceholder.png';\n  }\n}\n\n// PhoneRequestSection must be declared here, outside ProductDetails\ninterface PhoneRequestSectionProps {\n  product: Product;\n  t: any;\n  navigate: (path: string) => void;\n  isLoading: boolean;\n  setIsLoading: (loading: boolean) => void;\n  error: string | null;\n  setError: (error: string | null) => void;\n  setProduct: (product: Product | null) => void;\n}\n\nfunction PhoneRequestSection({ \n  product, \n  t, \n  navigate,\n  isLoading,\n  setIsLoading,\n  error,\n  setError,\n  setProduct \n}: PhoneRequestSectionProps) {\n  const { user } = useAuth();\n  const [contactRequestOpen, setContactRequestOpen] = useState(false);\n  const [contactRequestLoading, setContactRequestLoading] = useState(false);\n  const [contactRequestError, setContactRequestError] = useState('');\n  const [pendingFarmers, setPendingFarmers] = useState<string[]>([]);\n  const [existingRequestId, setExistingRequestId] = useState<string | null>(null);\n  const [hasPendingRequest, setHasPendingRequest] = useState<boolean>(false);\n  const [requestLoading, setRequestLoading] = useState(false);\n  const [requiredQuantity, setRequiredQuantity] = useState<number>(product.minimumOrderQuantity || 1);\n  const [showUserConfirmDialog, setShowUserConfirmDialog] = useState(false);\n  const [showFarmerConfirmDialog, setShowFarmerConfirmDialog] = useState(false);\n  const [finalQuantity, setFinalQuantity] = useState<number>(requiredQuantity);\n  const [finalPrice, setFinalPrice] = useState<number>(product.price);\n  const [userFeedback, setUserFeedback] = useState('');\n  const [didBuy, setDidBuy] = useState<boolean>(true);\n  const [farmerFeedback, setFarmerFeedback] = useState('');\n  const [didSell, setDidSell] = useState<boolean>(true);\n  const [confirmationStatus, setConfirmationStatus] = useState<string>('');\n\n  const currentUserId = getCurrentUserId();\n  const isLoggedIn = !!currentUserId;\n  const isOwnProduct = currentUserId && product.farmer?._id === currentUserId;\n  const role = user?.role;\n\n  useEffect(() => {\n    let isMounted = true;\n    const controller = new AbortController();\n\n    const checkRequestStatus = async () => {\n      try {\n        const shouldCheck = product?.farmerId?.toString() && \n                           product?._id?.toString() && \n                           user?._id?.toString();\n        \n        if (!shouldCheck) return;\n\n        setRequestLoading(true);\n        \n        const { exists } = await checkExistingContactRequest(\n          product.farmerId.toString(),\n          product._id.toString(),\n          Date.now()\n        );\n        \n        if (isMounted) setHasPendingRequest(!!exists);\n      } catch (error) {\n        console.error('Status check error:', error);\n        if (isMounted) setHasPendingRequest(false);\n      } finally {\n        if (isMounted) setRequestLoading(false);\n      }\n    };\n\n    const timer = setTimeout(() => {\n      if (product?.farmerId && product?._id) {\n        checkRequestStatus();\n      }\n    }, 500);\n\n    return () => {\n      isMounted = false;\n      controller.abort();\n      clearTimeout(timer);\n    };\n  }, [user?._id, product?.farmerId?.toString(), product?._id?.toString()]);\n\n  const quotaMsg =\n    role === 'vendor'\n      ? t('productDetails.vendorQuota', 'Vendors can request up to 5 phone numbers per day.')\n      : t('productDetails.userQuota', 'Users can send up to 2 contact requests per day.');\n\n  const fetchProductData = async () => {\n    try {\n      setIsLoading(true);\n      const productResponse = await api.get(`/products/${product._id}`);\n      const statusResponse = await checkExistingContactRequest(\n        productResponse.data.farmer._id,\n        productResponse.data._id\n      );\n  \n      const updatedProduct = productResponse.data as Product;\n      updatedProduct.farmerId = updatedProduct.farmer._id;\n      \n      setProduct(updatedProduct);\n      setHasPendingRequest(statusResponse);\n    } catch (error) {\n      setError(error instanceof Error ? error.message : 'Failed to fetch product details');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const isContactRequestAllowed = () => {\n    return !pendingFarmers.includes(product?.farmerId || '') && isLoggedIn;\n  };\n\n  const isQuantityValid =\n    requiredQuantity >= (product.minimumOrderQuantity || 1) &&\n    requiredQuantity <= product.availableQuantity;\n\n  const handleContactRequest = async () => {\n    try {\n      setRequestLoading(true);\n      const result = await createContactRequest(product._id, requiredQuantity);\n      if (result.existingRequestId) {\n        setHasPendingRequest(true);\n        toast.info('Contact request already exists');\n        return;\n      }\n      const verifiedStatus = await checkExistingContactRequest(\n        product.farmerId,\n        product._id\n      );\n      setHasPendingRequest(verifiedStatus);\n      toast.success(verifiedStatus ? \n        'Request verified successfully' : \n        'Request submitted successfully'\n      );\n    } catch (error: any) {\n      setHasPendingRequest(false);\n      toast.error(error.response?.data?.message || error.message || 'Request failed');\n    } finally {\n      setRequestLoading(false);\n    }\n  };\n\n  const handleUserConfirm = async () => {\n    try {\n      await confirmContactRequestAsUser(product._id, {\n        finalQuantity,\n        finalPrice,\n        didBuy,\n        feedback: userFeedback,\n      });\n      toast.success('Confirmation submitted!');\n      setShowUserConfirmDialog(false);\n    } catch (error) {\n      toast.error('Failed to submit confirmation');\n    }\n  };\n\n  const handleFarmerConfirm = async () => {\n    try {\n      await confirmContactRequestAsFarmer(product._id, {\n        finalQuantity,\n        finalPrice,\n        didSell,\n        feedback: farmerFeedback,\n      });\n      toast.success('Confirmation submitted!');\n      setShowFarmerConfirmDialog(false);\n    } catch (error) {\n      toast.error('Failed to submit confirmation');\n    }\n  };\n\n  if (!isLoggedIn) {\n    return (\n      <Box sx={{ mt: 2 }}>\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={() => navigate('/login')}\n        >\n          {t('productDetails.loginToRequestPhone', 'Login to request phone number')}\n        </Button>\n      </Box>\n    );\n  }\n\n  if (isOwnProduct) {\n    return null;\n  }\n\n  return (\n    <Box sx={{ mt: 2 }}>\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={!!(hasPendingRequest || requestLoading || !product)}\n        onClick={() => setContactRequestOpen(true)}\n        startIcon={hasPendingRequest ? <CheckCircle /> : undefined}\n      >\n        {requestLoading ? (\n          <CircularProgress size={24} />\n        ) : hasPendingRequest ? (\n          t('contactRequested')\n        ) : (\n          t('requestContact')\n        )}\n      </Button>\n      <Dialog open={contactRequestOpen} onClose={() => setContactRequestOpen(false)}>\n        <DialogTitle>{t('productDetails.confirmRequestTitle', 'Confirm Request')}</DialogTitle>\n        <DialogContent>\n          <Typography gutterBottom>\n            {t('productDetails.confirmRequestMsg', 'Are you sure you want to send a contact request for this product?')}<br />\n            <b>{t('productDetails.minimumOrderQuantity')}: {product.minimumOrderQuantity} {product.unit}</b><br />\n            {quotaMsg}\n          </Typography>\n          <TextField\n            label={t('productDetails.requiredQuantity', 'Required Quantity')}\n            type=\"number\"\n            value={requiredQuantity}\n            onChange={e => setRequiredQuantity(Number(e.target.value))}\n            inputProps={{ min: product.minimumOrderQuantity || 1, max: product.availableQuantity }}\n            fullWidth\n            sx={{ mt: 2 }}\n            helperText={\n              requiredQuantity < (product.minimumOrderQuantity || 1)\n                ? t('productDetails.requiredQuantityValidation', `Minimum order is ${product.minimumOrderQuantity} ${product.unit}`)\n                : requiredQuantity > product.availableQuantity\n                  ? t('productDetails.maxQuantityValidation', `Cannot order more than available (${product.availableQuantity} ${product.unit})`)\n                  : ''\n            }\n            error={\n              requiredQuantity < (product.minimumOrderQuantity || 1) ||\n              requiredQuantity > product.availableQuantity\n            }\n          />\n          {contactRequestError && (\n            <Typography color=\"error\" variant=\"body2\">{contactRequestError}</Typography>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setContactRequestOpen(false)} disabled={contactRequestLoading}>\n            {t('productDetails.cancel', 'Cancel')}\n          </Button>\n          <Button\n            onClick={async () => {\n              if (!isQuantityValid) {\n                setContactRequestError(\n                  requiredQuantity < (product.minimumOrderQuantity || 1)\n                    ? t('productDetails.requiredQuantityValidation', `Minimum order is ${product.minimumOrderQuantity} ${product.unit}`)\n                    : t('productDetails.maxQuantityValidation', `Cannot order more than available (${product.availableQuantity} ${product.unit})`)\n                );\n                return;\n              }\n              setContactRequestError('');\n              await handleContactRequest();\n              setContactRequestOpen(false);\n            }}\n            color=\"primary\"\n            disabled={contactRequestLoading || !isQuantityValid}\n          >\n            {contactRequestLoading ? t('productDetails.requesting', 'Requesting...') : t('productDetails.confirm', 'Confirm')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={showUserConfirmDialog} onClose={() => setShowUserConfirmDialog(false)}>\n        <DialogTitle>{t('productDetails.userConfirmTitle', 'Confirm Purchase')}</DialogTitle>\n        <DialogContent>\n          <TextField\n            label={t('productDetails.finalQuantity', 'Final Bought Quantity')}\n            type=\"number\"\n            value={finalQuantity}\n            onChange={e => setFinalQuantity(Number(e.target.value))}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <TextField\n            label={t('productDetails.finalPrice', 'Final Price')}\n            type=\"number\"\n            value={finalPrice}\n            onChange={e => setFinalPrice(Number(e.target.value))}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <TextField\n            label={t('productDetails.feedback', 'Feedback (optional)')}\n            value={userFeedback}\n            onChange={e => setUserFeedback(e.target.value)}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <Box sx={{ mt: 2 }}>\n            <Button\n              variant={didBuy ? 'contained' : 'outlined'}\n              color=\"success\"\n              onClick={() => setDidBuy(true)}\n              sx={{ mr: 1 }}\n            >\n              {t('productDetails.yesBought', 'Yes, I bought')}\n            </Button>\n            <Button\n              variant={!didBuy ? 'contained' : 'outlined'}\n              color=\"error\"\n              onClick={() => setDidBuy(false)}\n            >\n              {t('productDetails.noBought', 'No, I did not buy')}\n            </Button>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowUserConfirmDialog(false)}>{t('productDetails.cancel', 'Cancel')}</Button>\n          <Button onClick={handleUserConfirm} color=\"primary\">{t('productDetails.submit', 'Submit')}</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={showFarmerConfirmDialog} onClose={() => setShowFarmerConfirmDialog(false)}>\n        <DialogTitle>{t('productDetails.farmerConfirmTitle', 'Confirm Sale')}</DialogTitle>\n        <DialogContent>\n          <TextField\n            label={t('productDetails.finalQuantity', 'Final Sold Quantity')}\n            type=\"number\"\n            value={finalQuantity}\n            onChange={e => setFinalQuantity(Number(e.target.value))}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <TextField\n            label={t('productDetails.finalPrice', 'Final Price')}\n            type=\"number\"\n            value={finalPrice}\n            onChange={e => setFinalPrice(Number(e.target.value))}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <TextField\n            label={t('productDetails.feedback', 'Feedback (optional)')}\n            value={farmerFeedback}\n            onChange={e => setFarmerFeedback(e.target.value)}\n            fullWidth\n            sx={{ mt: 2 }}\n          />\n          <Box sx={{ mt: 2 }}>\n            <Button\n              variant={didSell ? 'contained' : 'outlined'}\n              color=\"success\"\n              onClick={() => setDidSell(true)}\n              sx={{ mr: 1 }}\n            >\n              {t('productDetails.yesSold', 'Yes, I sold')}\n            </Button>\n            <Button\n              variant={!didSell ? 'contained' : 'outlined'}\n              color=\"error\"\n              onClick={() => setDidSell(false)}\n            >\n              {t('productDetails.noSold', 'No, I did not sell')}\n            </Button>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowFarmerConfirmDialog(false)}>{t('productDetails.cancel', 'Cancel')}</Button>\n          <Button onClick={handleFarmerConfirm} color=\"primary\">{t('productDetails.submit', 'Submit')}</Button>\n        </DialogActions>\n      </Dialog>\n      {confirmationStatus && (\n        <Box sx={{ mt: 2 }}>\n          <Chip label={t(`productDetails.status.${confirmationStatus}`, confirmationStatus)} color={\n            confirmationStatus === 'completed' ? 'success' :\n            confirmationStatus === 'disputed' ? 'error' :\n            confirmationStatus === 'pending' ? 'warning' : 'default'\n          } />\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface Product {\n  _id: string;\n  name: string;\n  description: string;\n  price: number;\n  unit: string;\n  images: string[];\n  isOrganic: boolean;\n  availableQuantity: number;\n  minimumOrderQuantity?: number | null;\n  harvestDate: string;\n  storageInfo: string;\n  nutritionalInfo?: {\n    calories: number;\n    protein: string;\n    carbs: string;\n    fat: string;\n    fiber: string;\n    vitamins: string;\n  };\n  location: {\n    district: string;\n    state: string;\n  };\n  farmer: {\n    _id: string;\n    name: string;\n    profileImage: string | { data: string; contentType: string };\n    profileImages?: string[];\n    phone: string;\n    email: string;\n    address: {\n      district: string;\n      state: string;\n    };\n  };\n  farmerId: string;\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ pt: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst ProductDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [pendingFarmers, setPendingFarmers] = useState<string[]>([]);\n  const [existingRequestId, setExistingRequestId] = useState<string | null>(null);\n  const [contactLoading, setContactLoading] = useState(false);\n  const [contactError, setContactError] = useState<string | null>(null);\n\n  const [selectedImage, setSelectedImage] = useState(0);\n\n  const [tabValue, setTabValue] = useState(0);\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        console.log(\"Fetching product with ID:\", id);\n        const response = await api.get(`/products/${id}`);\n        console.log(\"Product response:\", response.data);\n        const productData = response.data as Product;\n        productData.farmerId = productData.farmer._id;\n        setProduct(productData);\n      } catch (err) {\n        console.error(\"Error fetching product:\", err);\n        setError(\"Failed to load product details. Please try again later.\");\n        toast.error(\"Failed to load product details\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (id) {\n      fetchProduct();\n    }\n  }, [id]);\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  const defaultNutritionalInfo = {\n    calories: 0,\n    protein: \"Not specified\",\n    carbs: \"Not specified\",\n    fat: \"Not specified\",\n    fiber: \"Not specified\",\n    vitamins: \"Not specified\",\n  };\n\n  if (loading) {\n    return (\n      <Container\n        maxWidth=\"lg\"\n        sx={{\n          py: 4,\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          minHeight: \"60vh\",\n        }}\n      >\n        <CircularProgress size={60} />\n      </Container>\n    );\n  }\n\n  if (error || !product) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ py: 4, textAlign: \"center\" }}>\n        <Typography variant=\"h5\" color=\"error\">\n          {error || \"Product not found\"}\n        </Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          mb: 2,\n          mt: 2,\n          gap: 2,\n        }}\n      >\n        <IconButton\n          onClick={() => navigate(-1)}\n          sx={{\n            border: `1px solid ${theme.palette.divider}`,\n            borderRadius: \"50%\",\n            \"&:hover\": {\n              backgroundColor: theme.palette.action.hover,\n              borderColor: theme.palette.primary.main,\n            },\n            width: 40,\n            height: 40,\n          }}\n        >\n          <ArrowBack fontSize=\"small\" />\n        </IconButton>\n      </Box>\n      <Grid container spacing={4}>\n        <Grid item xs={12} md={6}>\n          <Box sx={{ mb: 2 }}>\n            <img\n              src={product.images[selectedImage]}\n              alt={product.name}\n              style={{\n                width: \"100%\",\n                height: \"400px\",\n                objectFit: \"cover\",\n                borderRadius: \"8px\",\n              }}\n            />\n          </Box>\n          <Box sx={{ display: \"flex\", gap: 1 }}>\n            {product.images.map((image, index) => (\n              <Box\n                key={index}\n                sx={{\n                  width: \"80px\",\n                  height: \"80px\",\n                  borderRadius: \"4px\",\n                  overflow: \"hidden\",\n                  border:\n                    index === selectedImage\n                      ? `2px solid ${theme.palette.primary.main}`\n                      : \"2px solid transparent\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => setSelectedImage(index)}\n              >\n                <img\n                  src={image}\n                  alt={`${product.name} ${index + 1}`}\n                  style={{\n                    width: \"100%\",\n                    height: \"100%\",\n                    objectFit: \"cover\",\n                  }}\n                />\n              </Box>\n            ))}\n          </Box>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <Box>\n            <Typography\n              variant=\"h4\"\n              component=\"h1\"\n              gutterBottom\n              fontWeight=\"600\"\n            >\n              {product.name}\n            </Typography>\n\n            {product.isOrganic && (\n              <Chip\n                label={t('productDetails.isOrganic')}\n                color=\"secondary\"\n                size=\"small\"\n                sx={{ mb: 2 }}\n              />\n            )}\n\n            <Typography\n              variant=\"h5\"\n              color=\"primary\"\n              fontWeight=\"bold\"\n              sx={{ mb: 2 }}\n            >\n              â‚¹{product.price}/{product.unit}\n            </Typography>\n\n            <Typography variant=\"body1\" sx={{ mb: 3 }}>\n              {product.description}\n            </Typography>\n\n            <Box\n              sx={{\n                display: \"flex\",\n                alignItems: \"center\",\n                mb: 3,\n                p: 2,\n                backgroundColor: \"background.paper\",\n                borderRadius: 1,\n                boxShadow: 1,\n              }}\n            >\n              <Box sx={{ mr: 2 }}>\n                <Avatar\n                  src={\n                    product.farmer.profileImage && typeof product.farmer.profileImage === 'object' && product.farmer.profileImage.data && product.farmer.profileImage.contentType\n                      ? `data:${product.farmer.profileImage.contentType};base64,${product.farmer.profileImage.data}`\n                      : (typeof product.farmer.profileImage === 'string' && product.farmer.profileImage.trim() !== '' && product.farmer.profileImage.startsWith('data:image'))\n                        ? product.farmer.profileImage\n                        : getRoleProfilePlaceholder('farmer')\n                  }\n                  sx={{ width: 56, height: 56 }}\n                />\n              </Box>\n              <Box>\n                <Typography variant=\"subtitle1\" fontWeight=\"bold\">\n                  {t('productDetails.soldBy')} {product.farmer.name}\n                </Typography>\n              </Box>\n            </Box>\n\n            <Grid container spacing={2} sx={{ mb: 3 }}>\n              <Grid item xs={6}>\n                <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                  <CalendarToday\n                    color=\"primary\"\n                    fontSize=\"small\"\n                    sx={{ mr: 1 }}\n                  />\n                  <Box>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {t('productDetails.harvestDate')}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {new Date(product.harvestDate).toLocaleDateString()}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Grid>\n              <Grid item xs={6}>\n                <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                  <LocationOn\n                    color=\"primary\"\n                    fontSize=\"small\"\n                    sx={{ mr: 1 }}\n                  />\n                  <Box>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {t('productDetails.productLocation')}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {product.location?.district}, {product.location?.state}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Grid>\n              <Grid item xs={6}>\n                <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                  <Inventory color=\"primary\" fontSize=\"small\" sx={{ mr: 1 }} />\n                  <Box>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {t('productDetails.availableQuantity')}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {product.availableQuantity} {product.unit}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Grid>\n              <Grid item xs={6}>\n                <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n                  <ShoppingCart color=\"primary\" fontSize=\"small\" sx={{ mr: 1 }} />\n                  <Box>\n                    <Typography variant=\"caption\" color=\"text.secondary\">\n                      {t('productDetails.minimumOrderQuantity')}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {product.minimumOrderQuantity !== null && product.minimumOrderQuantity !== undefined ? `${product.minimumOrderQuantity} ${product.unit}` : t('productDetails.notSet')}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Grid>\n            </Grid>\n\n            <Divider sx={{ mb: 3 }} />\n\n            <Box sx={{ display: \"flex\", gap: 2 }}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\"\n                sx={{ flexGrow: 1, py: 1.5 }}\n                onClick={() => setTabValue(2)}\n              >\n                {t('productDetails.contactSeller')}\n              </Button>\n            </Box>\n          </Box>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Box sx={{ mt: 6 }}>\n            <Paper sx={{ boxShadow: 1 }}>\n              <Tabs\n                value={tabValue}\n                onChange={handleTabChange}\n                aria-label=\"product details tabs\"\n                variant={isMobile ? \"scrollable\" : \"standard\"}\n                allowScrollButtonsMobile\n                sx={{\n                  \"& .MuiTabs-indicator\": {\n                    backgroundColor: theme.palette.primary.main,\n                  },\n                  \"& .MuiTab-root\": {\n                    fontSize: isMobile ? \"0.7rem\" : \"0.875rem\",\n                    minWidth: \"unset\",\n                    padding: isMobile ? \"6px 12px\" : \"12px 16px\",\n                    whiteSpace: \"nowrap\",\n                  },\n                }}\n              >\n                <Tab\n                  label={\n                    <Box component=\"span\" sx={{ minWidth: 80 }}>\n                      {t('productDetails.productDetails')}\n                    </Box>\n                  }\n                  id=\"tab-0\"\n                  aria-controls=\"tabpanel-0\"\n                />\n                <Tab\n                  label={\n                    <Box component=\"span\" sx={{ minWidth: 80 }}>\n                      {t('productDetails.nutritionalInfo')}\n                    </Box>\n                  }\n                  id=\"tab-1\"\n                  aria-controls=\"tabpanel-1\"\n                />\n                <Tab\n                  label={\n                    <Box component=\"span\" sx={{ minWidth: 60 }}>\n                      {t('productDetails.sellerInfo')}\n                    </Box>\n                  }\n                  id=\"tab-2\"\n                  aria-controls=\"tabpanel-2\"\n                />\n              </Tabs>\n              <Box sx={{ p: 3 }}>\n                <TabPanel value={tabValue} index={0}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    {t('productDetails.aboutThisProduct')}\n                  </Typography>\n                  <Typography variant=\"body1\" paragraph>\n                    {product.description}\n                  </Typography>\n\n                  <Typography variant=\"h6\" gutterBottom>\n                    {t('productDetails.keyFeatures')}\n                  </Typography>\n                  <Box component=\"ul\" sx={{ pl: 2 }}>\n                    <Box component=\"li\" sx={{ mb: 1 }}>\n                      <Typography variant=\"body1\">\n                        {t('productDetails.freshlyHarvested')} {new Date(product.harvestDate).toLocaleDateString()}\n                      </Typography>\n                    </Box>\n                    {product.isOrganic && (\n                      <Box component=\"li\" sx={{ mb: 1 }}>\n                        <Typography variant=\"body1\">\n                          {t('productDetails.organicallyGrown')}\n                        </Typography>\n                      </Box>\n                    )}\n                    <Box component=\"li\" sx={{ mb: 1 }}>\n                      <Typography variant=\"body1\">\n                        {t('productDetails.directlySourced')}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </TabPanel>\n                <TabPanel value={tabValue} index={1}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    {t('productDetails.nutritionalInformation')}\n                  </Typography>\n                  <TableContainer>\n                    <Table>\n                      <TableBody>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.calories')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.calories ?? defaultNutritionalInfo.calories} kcal\n                          </TableCell>\n                        </TableRow>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.protein')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.protein ?? defaultNutritionalInfo.protein}\n                          </TableCell>\n                        </TableRow>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.carbs')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.carbs ?? defaultNutritionalInfo.carbs}\n                          </TableCell>\n                        </TableRow>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.fat')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.fat ?? defaultNutritionalInfo.fat}\n                          </TableCell>\n                        </TableRow>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.fiber')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.fiber ?? defaultNutritionalInfo.fiber}\n                          </TableCell>\n                        </TableRow>\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {t('productDetails.nutrition.vitamins')}\n                          </TableCell>\n                          <TableCell>\n                            {product?.nutritionalInfo?.vitamins ?? defaultNutritionalInfo.vitamins}\n                          </TableCell>\n                        </TableRow>\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                </TabPanel>\n                <TabPanel value={tabValue} index={2}>\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", mb: 3 }}>\n                    <Avatar\n                      src={\n                        product.farmer.profileImage && typeof product.farmer.profileImage === 'object' && product.farmer.profileImage.data && product.farmer.profileImage.contentType\n                          ? `data:${product.farmer.profileImage.contentType};base64,${product.farmer.profileImage.data}`\n                          : (typeof product.farmer.profileImage === 'string' && product.farmer.profileImage.trim() !== '' && product.farmer.profileImage.startsWith('data:image'))\n                            ? product.farmer.profileImage\n                            : getRoleProfilePlaceholder('farmer')\n                      }\n                      sx={{ width: 80, height: 80, mr: 3 }}\n                    />\n                    <Box>\n                      <Typography variant=\"h6\" gutterBottom>\n                        {product.farmer.name}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {t('productDetails.certifiedFarmer')}\n                      </Typography>\n                    </Box>\n                  </Box>\n                  <Typography variant=\"h6\" gutterBottom>\n                    {t('productDetails.farmerLocation')}\n                  </Typography>\n                  <Box sx={{ mb: 3 }}>\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", mb: 1 }}>\n                      <LocationOn color=\"primary\" fontSize=\"small\" sx={{ mr: 2 }} />\n                      <Typography variant=\"body1\">\n                        {product.farmer?.address?.district}, {product.farmer?.address?.state}\n                      </Typography>\n                    </Box>\n                  </Box>\n                  <PhoneRequestSection \n                    product={product} \n                    t={t} \n                    navigate={navigate}\n                    isLoading={contactLoading}\n                    setIsLoading={setContactLoading}\n                    error={contactError}\n                    setError={setContactError}\n                    setProduct={setProduct}\n                  />\n                </TabPanel>\n              </Box>\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default ProductDetails;\n"],"names":["ImageWithFallback","fallbackSrc","props","handleError","e","jsx","AuthContext","createContext","AuthProvider","children","user","setUser","useState","token","setToken","loading","setLoading","useEffect","storedToken","login","email","password","res","axios","logout","useAuth","ctx","useContext","containerPadding","cardStyle","paperStyle","gridSpacing","typographyStyles","formElementStyles","t","l","a","n","o","r","c","s","i","p","u","d","f","g","h","m","j","W","F","A","Y","U","P","y","J","x","oe","I","re","se","k","te","ne","ie","V","ae","pe","N","de","_","ce","ue","w","le","fe","me","Te","M","g.createElement","ye","ge","he","xe","be","B","Se","Ae","z","l.memo","l.createElement","l.Fragment","Re","T.createElement","Pe","Marketplace","theme","useTheme","isMobile","useMediaQuery","isTablet","useNavigate","searchQuery","setSearchQuery","products","setProducts","debouncedSearchQuery","setDebouncedSearchQuery","categories","setCategories","useTranslation","isFilterDrawerOpen","setIsFilterDrawerOpen","selectedDistrict","setSelectedDistrict","sortBy","setSortBy","selectedCategories","setSelectedCategories","organicOnly","setOrganicOnly","currentPage","setCurrentPage","pageCount","setPageCount","totalProducts","setTotalProducts","productsPerPage","error","setError","params","total","backendPageCount","fetchProducts","err","message","toast","fetchCategories","handler","uniqueDistricts","product","_a","district","handleCategoryChange","category","prev","cat","toggleFilterDrawer","open","handleSearchChange","event","handleSortChange","capitalize","str","Container","CircularProgress","Typography","desktopFilterSection","Box","Paper","Grid","TextField","InputAdornment","Search","jsxs","FormControl","InputLabel","Stack","Sort","Select","MenuItem","Category","selected","value","Chip","Checkbox","ListItemText","LocationOn","Tooltip","FormControlLabel","GrassOutlined","Button","FilterList","Card","CardContent","Store","CardActions","Link","Pagination","Drawer","IconButton","Close","Divider","FormGroup","getCurrentUserId","payload","getRoleProfilePlaceholder","role","PhoneRequestSection","navigate","isLoading","setIsLoading","setProduct","contactRequestOpen","setContactRequestOpen","contactRequestLoading","setContactRequestLoading","contactRequestError","setContactRequestError","pendingFarmers","setPendingFarmers","existingRequestId","setExistingRequestId","hasPendingRequest","setHasPendingRequest","requestLoading","setRequestLoading","requiredQuantity","setRequiredQuantity","showUserConfirmDialog","setShowUserConfirmDialog","showFarmerConfirmDialog","setShowFarmerConfirmDialog","finalQuantity","setFinalQuantity","finalPrice","setFinalPrice","userFeedback","setUserFeedback","didBuy","setDidBuy","farmerFeedback","setFarmerFeedback","didSell","setDidSell","confirmationStatus","setConfirmationStatus","currentUserId","isLoggedIn","isOwnProduct","isMounted","controller","checkRequestStatus","_b","_c","exists","checkExistingContactRequest","timer","quotaMsg","isQuantityValid","handleContactRequest","createContactRequest","verifiedStatus","handleUserConfirm","confirmContactRequestAsUser","handleFarmerConfirm","confirmContactRequestAsFarmer","CheckCircle","Dialog","DialogTitle","DialogContent","DialogActions","TabPanel","index","other","ProductDetails","id","useParams","contactLoading","setContactLoading","contactError","setContactError","selectedImage","setSelectedImage","tabValue","setTabValue","response","api","productData","handleTabChange","newValue","defaultNutritionalInfo","ArrowBack","image","Avatar","CalendarToday","Inventory","ShoppingCart","Tabs","Tab","TableContainer","Table","TableBody","TableRow","TableCell","_d","_e","_f","_g","_h","_j","_i","_l","_k"],"mappings":"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","x_google_ignoreList":[3,4]}